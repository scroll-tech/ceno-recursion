CONST:
max_n 2

INPUT:

PROGRAM:
def ark(u32 n, field[{max_n} + 1] state, field[455] c, u32 it) -> field[{max_n} + 1]:
    // BASELINE
    for u32 i in 0..{max_n} do
        if i < n then
            state[i] = state[i] + c[it + i]
        endif
    endfor
    // COBBL
    u32 i = 0
    while i < n do
        state[i] = state[i] + c[it + i]
        i = i + 1
    endwhile
    // END_SPLIT
    return state

def sbox(u32 n, field[{max_n} + 1] state, u32 f, u32 p, u32 r) -> field[{max_n} + 1]:
    state[0] = state[0]**5
    // BASELINE
    for u32 i in 1..{max_n} do
        if i < n then
            state[i] = ((r < f/2) || (r >= f/2 + p)) ? state[i]**5 : state[i]
        endif
    endfor
    // COBBL
    u32 i = 1
    while i < n do
        state[i] = ((r < f/2) || (r >= f/2 + p)) ? state[i]**5 : state[i]
        i = i + 1
    endwhile
    // END_SPLIT
    return state

def mix(u32 n, field[{max_n} + 1] state, field[49] m) -> field[{max_n} + 1]:
    field[{max_n} + 1] out = [0; {max_n} + 1]
    // BASELINE
    for u32 i in 0..{max_n} do
        if i < n then
            field acc = 0
            for u32 j in 0..{max_n} do
                if j < n then
                    acc = acc + (state[j] * m[i * {max_n} + 1 + j])
                endif
                out[i] = acc
            endfor
        endif
    endfor
    // COBBL
    u32 i = 0
    while i < n do
        field acc = 0
        u32 j = 0
        while j < n do
            acc = acc + (state[j] * m[i * {max_n} + 1 + j])
            j = j + 1
        endwhile
        out[i] = acc
        i = i + 1
    endwhile
    // END_SPLIT
    return out

def poseidon(u32 n, field[{max_n}] inputs) -> field:
    field[455] POSEIDON_C = [
        6102929899913997120028526874925676104844758924303424659933606352399117208470,
        6241576116551563299583110165591268824843574050316410672639976081232485352845,
        3146998002328796133008896409631221052612249729530471806972645553913420502052,
        5835391399495059723133479820227963929505528923821389009760396137516989294991,
        1254512945376116036451577505714957696931857937705513709489839003805265307914,
        6695786791760449148581877410879536466836042381990045292766970832253870097243,
        5811812883278516219352053823681730628206020220037199715522869871279653758078,
        3172107927893881968040338867507512758810684936986998574055067978696842797512,
        2453358004559560032928543909003181578282212961489343497167931964001116323882,
        5018899893259598163324722186954715786232630807079106345505362128528145273270,
        6414621250728423455444225908048798965980767196385719160321111884310240116347,
        2905592547428656935844368862187956127503104787392150166831671235739963533019,
        1405017544557525274683469427446505416877900502960831020650875567066504833070,
        3451262128301820952350918661869625562758011793321708732492893835265600202068,
        4258136119174240058389514462425707320534120609504444042100859896029998952814,
        3624593209674539611943099653965646853877646512134553536644742993290200869753,
        3339278363845164581994160522034172291374618214021103654591396792018782785651,
        480797116310189281860169334505001967375903737335405660255658163190398281750,
        2772764683854969174684183733169022786318489632569926720387565966365136085562,
        4790773064031250907878916005016224284285160532751681860479289022781359261955,
        7118617917290455568565349523211043675000210767480887230879946464696423148979,
        7033562003633240548298839324619498684373504271491773997871759417146703341390,
        2909804196604534362059968498751862044921856792433150199973697716783408440169,
        1916297974669879547885672721741741889352527147063178445845573238355829186187,
        5219904451149709390124193644939232145573894013333009574103969998852851219185,
        6482199453609755207672845815300658600301342672619166303257521052952293830872,
        6868648111046562546137615185312764597145399839512302796685899098384925596174,
        7120908155270722617672636327029703937771532717533876561647206431354679448866,
        3446833455912835224998080611502326751538688157377382633063397118678778648678,
        4439960137396837521221093797513278877827681755309557133662286996376221391906,
        4193157789884954084868068873152649196640517164679245160322949759353659101160,
        2309579060535538284935336953796680985993154762020301390119898202238000337855,
        5065280921962383744162675145765946485364172713312236050424444521726040900598,
        2515828541882594422356723857193449534324438964102513377141570363588796994553,
        3771509625010424212168751485232368568487146011446902522508780566152266509543,
        4754583069457983586723075039463247459610575105638305564524649123262765910805,
        3772196935110686222809102619934713224123467618903157037005527164421301150581,
        4481969045598038944127303196235136373395416851461273051929690896962514440241,
        2670301251768009611836188628142071110621657913637191474451901256987638893158,
        4901302783866123883876906338152549180353801625587865388608491467969667455333,
        2617635085294869300776003954953086218051498877346521095022908922171213519931,
        2226748938975074222185831028886377598188353985660005337801133726373210801679,
        2641602334499771648079219286073421851236573850368150175086759824225360369737,
        476813684583359953783724355079195729761036186008599458971924604076587717630,
        6894331741892708491552975100849612493235295064245595621103994861387216921625,
        363186252143209159422284026528197030955660731599033594897348815944095414644,
        7104605888564791335913294857431645058813003185089598134889245374367253959195,
        5839519692509972267839340781684238953764944257548855083793073758856233576276,
        332261077275221475973725098492869263099299027144405749836087308601005019258,
        139593597042737405169268755689790316654130423489622616981763523041299186216,
        3985628843821722122683051161861072152977031690742142664642539256358231036592,
        5653015336210908804891263288924774880043006867157806262726993885531938370947,
        69308873003370081903849872670367820295029412397369363895448352928335298948,
        1069631940234451753610191659783634322993812326859891941566670786759610817700,
        5016330470149317597551034069064620061764760155754481068527866239776180003376,
        2732594333782592976428587678336433544720424152553519966405563254608949716762,
        7099204057225368869837722554249092192789183629338795803337988726067061246956,
        508305680221122823073489665976483825351248813362903807637268506879750108510,
        2921133483151724536555177740513730875071340187030502679678569418935294279814,
        3429603088178530428936911143666942493474260591187659618168053937417735354476,
        751175541944009858933264911740665475006533993878049866849348760611873279379,
        543435026926694179521579903550199850340587602852430320032120977889272123990,
        4550842634634672546249073666285618681788874505869109940170955645562790675502,
        1643753751522554495205504952287197541080244446247825776620302329359360933396,
        1600995392627624297659077182444278470221803211985376801336859695739602147180,
        6487347877484646615293583316191618335855134890035774581835596210427923194440,
        2752152668685898111391183005867205926476123073741746393284049060219818303787,
        2245901902213882737218781491809367913914704010880891116917809181569307953350,
        2168730879415463765347416622742853634205736136386183599073073135594884409436,
        3575982673632877482402593430752161713756533646471637115125265490898559537298,
        2006759861266403845250661071232544579688561559016133916200094264354210129581,
        2931786880240799724618968606567077897627796121038982234251304097630012459578,
        2367347427241444998238812782303914724353745712576415775557782776765282225780,
        3181343481760128327630104090795540626676616702531107092563837754226554637467,
        892910865482323037431505403657042806062240942306868132206522785831024866495,
        2721274184926441269961403458294674637746405842143704880091118625794657615470,
        4054837628943101921629323254459560729245207850963533412295529910768104330666,
        2023736261730172014695322388107059458503126760090426682849634326468123869466,
        2765484142848251757905818953020011833193569314133043400220529838744391501245,
        2131278618998770320078933078606210686041650264342707807037786090948016859303,
        97290192717683170987879819814321157690319896240681462159770882473909579946,
        2106931075785684979048911364479663229078328865572447866650332666401760062251,
        799590329781274161449683739053376107455991370177421687338777598322641434837,
        2775049194450038215088463676372544009313447194784412971441395031525841036829,
        1974825649680658621460446575183712095383718287794283346536111602442969219085,
        2099248670155840908948248148736147041782908689976165153755515091199747123057,
        835375899941564192942005464718586766122309564720002582004996458510224070969,
        747166161309290442837568158043517749678670241269413987160444466962926397151,
        6333210908201010837372419546318869779815595944661079162492547798882038743165,
        5221622252478199894525885071253288020355680530743958090606348832198013535925,
        5372639549416003496923509153864134981826679995130340233453739451490809597670,
        2440213615529273216869788178046851086559261361263434595675640290655323269172,
        1276089307967355945532867503767327183266899655633946071290887915163262875628,
        331065554233389046231405892186304761198243993482023136462133530558091635122,
        217698428168878286019352533970725896110897352493010180216328172377342897267,
        5164556053289263145825091341191779174934188913945274604970482743168008703458,
        5949578549187616615537338398185087491003503431023836930943613558655403874723,
        3638234329719153867626922934808498558661306131871232727209569152229240793826,
        147808904675962598209587962338741435107750187967006068961509907101893704379,
        761750498821177556234662603336947526393133937998228771334049673562925151240,
        4410859260289708546911574850670549520359455034719576253127214750457848986254,
        255323830203316517049423445258071702432925295335754818817898626661008013634,
        1723728518675437883644222835221053136641653546329355690167057506021059241055,
        5870976851706139511648212538879395148059810576437679255538156583201571251398,
        971302141791180411689626585493646041701484326248878300908273808480240391689,
        3926340906058551368969009566762103639662589386417849892961292111768649512208,
        668036272455733846381064559674731343044494624655381076091281474160922334295,
        6495282697012236931276196133112896599088963741087076323567586425026246137498,
        6233342567049148458074640280833491304591871980127687127101766707846539005446,
        1512579560904807134897760218594305741911195450763226611724761250985036676379,
        6833851308562483525424043518285720564830565961635670704058647740094735484395,
        5206682977059435970184958534170017110323806744685068334025321620687477668668,
        4496846487901882018854854843746740951841190177604305244945509400661375164806,
        3933347446613118301506941340864604151919910710639564656019969417582430867030,
        2306591065965685965350795884219330425310546648363586987379816462701109914623,
        1277962604743940339653088492641864812785712743955494089034911877218989540208,
        4782124828108329377449117746136984233345281943752713303612385424137519166001,
        3778222037764559616908605431512669317687707846658883208472006788087619863100,
        1046538466624827522971515488882235766745313846354646661805784676651451745587,
        555023898571062945516485994525760371365758550034076339551316650191443177554,
        1379993042147415239269943669256129959277750582958860236997285734721394334085,
        73101233102959827006350575708601495629629521107688790680911095752900711041,
        5105146613422552392529130986170994135487741609407108254506950723412189884352,
        2037677481550238714321850672937510342193052211059754408260314696057111178075,
        1299491986007775969348087211531849601211461927760242697094365752950411413640,
        4608406918869570739526431894092754694365804574784966119068570352427631334738,
        3122585093174782690978756717760906613409738430311707962189089026665044261007,
        6369486899765131503563668437127961060599522090386854128353066890244934094502,
        2893185232559522109783290514306995470819172868334769581524102720792161135238,
        3197296820970967874326214750847216927371919380572768239371193560624599596037,
        7221929764377494711001395053429209768415895140875029228503081262822391853151,
        4659996306121099589845070037689944918548382544180318975649636974297035856769,
        2966684907295944320013375197245056330405019413238586125785811607665213846050,
        6008510405649227614069464622322705185220764863213546776332510688175377871007,
        2125672932404304217661354617549070673228022500865565389925490616123003536742,
        288451399507845523827730351116093591919873299624524727285711891362794634231,
        6991197561876395898568156093766009580618109948605870346305918248792438258915,
        1455578228111049452081055167931138176539843562373505536291153384994505645116,
        4329457036749275701599726969296345780062170071849855247154733290748519152270,
        465971621720919857653239077289594367182480273322631194973316529673417371011,
        3462079094246679459497532462098999085292331054718029725573718340182109237483,
        4349158464691662739610333560462039503919235754418900964028045331090044520982,
        4119987098574092545200959214131872368164108190350289964299829033517754896251,
        5315413352049258953074107807880388240536097818021769523744283957427634378617,
        2252570387053101124734903531926633847169737908332126653915671695854330368006,
        1868024699337731594704520055167453734164283965186055082887421607109508705280,
        1062442247315942080087637786424893922680780217637776418791274531080982847788,
        3026562175758194214702505610673876956701807477475418989410395312447903049705,
        7210340909882027703850360889095172235540638577342814843030400352640602278082,
        6496609298351923392263950489702222813714608314156623076075478421230175225010,
        4687721509852337986770908380162853344317702507440032859351534025724739036810,
        2638818067439239975002325258309614135942384801345175877816948240754662088777,
        1827384788535890768976490882655671032577051435224960404033524306424944860121,
        1311106589928761527884786716418307257708837159748687020446054420976408285670,
        1866838470922604247353316035017862780264361895700912148875410969482023856554,
        6469170561555743921444874031344828564515365383407023806370052561037589835474,
        942806224441141680543641324176305848098403577186074027356871266566225793917,
        4466830798428033169697129290117852737900370031292540660736864555785739562822,
        6483779652641638873981993150950700317580693032434305643369941709294941753917,
        6769894414115458943331604099701010074534632777462864770510031131533319438809,
        6866215606266414979311020299969999872370724862638187009691526972571404133840,
        3600398185476538023346774428509932580489136748261105541738024957298121588852,
        3852699969557286293741152439895335314628640734633411426061922607666080296433,
        3528582291566431014104229993095157338796704775551845352587860387522872176400,
        3945202091065834697089386702844780978836756146574354467681764519527220987137,
        6491926981258812108373485615625509303559043482743992694981158889199371219739,
        5573810763217320496061353910102393535014707177606947291671781936158420526515,
        1338272095146948303626287043202085116474669275804034998356535090448251969504,
        997685845159830289921910316134744245301824352468809109115153007054768732288,
        1841599230714221789670813498733137558092072905824929341968402423868455863314,
        3103791471596919423448145507825478507971442574234741005465969466774785590317,
        5739659926767249364073936916508995143773241745009918775896567070709718761330,
        7060410839078852183276471802145581066116772971309803802068610725433346368664,
        3264783183796701397908362464314687455734364090956359591981778999042732532668,
        3467495246614619816442352011723403848347441756877500325033291295639543865367,
        120804304619298800954625094216451874627274260115897604476400392060281419845,
        2255631053862766595519222354510371573831510732145598812215189785961755252635,
        1063324537942551464429117142733082351080616313845162218450203341231725455360,
        2797368625955890412590555104468265279152711086584501268259177318369883831455,
        4097379010095993522211807737859226409678486426148410614027027775785330647593,
        2421972209935321529274441580682010131225617391001000647542072165525074550395,
        4168788207296874741775150210802162108960773134748540021993529411329945505036,
        6884661870396181812673457022647582310046640346443031885128954900778508120381,
        2371760900949830095967505711589062918985983769178118490685299786569743261414,
        6543897222929236889071227576898967532198164698735675864824943321882000733307,
        6187085822119418237067919694935829740052502867403583998604364245756788018389,
        6525226897158592842097410306538345252850359376474192646815846110794635523347,
        235897706636883999531340476231657324305251317089511752982129113217498008431,
        2605156036002844911241990532140594156298550958792084811273319906089194678364,
        4831157343898944175395617809602822034631240238506727410783152168701943585036,
        1632814800620315386055526820675143749418042547743382305800280412119611231244,
        5613769821508174803406412470150700289492446264975315645577872629988586701319,
        5234210593302890353155027367268801518104073121251160741928919427781104517512,
        1602926578489324326760824421485266141651049666255949848613393616957908004168,
        2649070203270688830058128056017376096331639270488446929282777223684047728564,
        6547762218329803709172765892648316856802669835355087988327473839571680518870,
        3460001836120196910451097828698740688612001447278934661267548315502239289965,
        3387949115807921385110778146518218117688729525128844916289110209596123027880,
        4393672869870175158388961529113920280839814588626154167039357139481300676707,
        524223459221424261509918826894522095437311176138938365105844002835461768516,
        5780038935367262273443364245701791953372269127798085793503524819560083179824,
        6305095967825512182950405108573384285429876931852131811028715982202729737002,
        6297528665042094905369630990363287466811548954906556627064183816329062369916,
        3455371422542935932702621948322940735109210660703976266032556004173745510092,
        5156349549970309969482403040775637899965022354980865252050584536344140378086,
        7052893580896152310814961787799105033690384703765626208860734729790271183940,
        581656038804952254428404621356320644974154384083451911029767765526002596366,
        3476209514271395773336527183375331936577220319361412693400445591197938479291,
        5577580533892282013412326240095009367143606517587169899827697828865497854805,
        4827306984002855130880756423455566639355410881213827740613480649345787451219,
        5476501146392638737169281107577222781896856585424497243723206789272274311451,
        5311061315294536797828441103932638198947751366098402590346467453217729396829,
        2687217918956919492389537368782139399087247253781215368972513100015385213523,
        7156130803351954281028182424187371261324196706024220817091551589876050365847,
        325974505082407951654920080423591691340444908572891269081616136076328833527,
        5734455360701169799032822949528597673897192007377465437652867803710102518372,
        3249490117173619306154103365394834922137768999772141692492605123967304341717,
        1418168965384163431958483165436132421967755128802411640179983390676719060807,
        5436412963562970069138351921314374552439766387842703663544230479333126458334,
        6786251212059002276150961308145960195266915848094198138942255892478461257062,
        2286394556976808583320873218024105416396980551231095045027677563512510376071,
        5364843062922648556086308295307779539630962238568058431053610057087054710858,
        6233107907755475737161358882773991358240445089703560861269486383759778342667,
        5836498904829364403550163266616949814702509292806578982110168122873374538505,
        4963368734408805881166529924498876452611942038546527884964584591538713095937,
        2064173433448802110971556001483149171080996239037446090506158876398516114481,
        4954738316364354672915457010553985977150682290050256438678371144557852894443,
        6301137123097624916382626390171946005673327111338931280764553249266359171312,
        6914007753076606920599878230438534666430420963856537040104441972818211634522,
        644769090557494122025367731053582287578264383093848701420903453051319218654,
        3769243340826069790252141961745556060554519859702408654319829274269645216154,
        2570242128849614732320844958035416117021925621711270651220260328787564345145,
        6647030902122321854492041179672517582895902532363723484076491100115617487000,
        5389202494196546528590315839139527901668953041869011466151294745825721036172,
        471965619996426306707191881717765655581785468825621453725045767174132533974,
        5750424386890960799104116192590576136912965614174143744649412436196342123530,
        364864015508120584090691357754701173062793765532084981742970889744965922385,
        3688248572223593429214784579375705680647127721243407455533409105276728899645,
        3570019115115248680529531377329551482634300419674813963152584712560689683360,
        1210469164249898640149811983587657068101678433615622825173949652567384751873,
        6307356952643792925191164715592935568792633896004063243305552023973439938662,
        4120247942455602695986071556091515701594859737515545721858820434852982537210,
        2455439914281294128475051392911507400624525349893877338996794213224213292605,
        2152599739838528984725977308875838620573752494010510485291634534392504851083,
        1487940221791452193101079932068101066407780989968496853084163466331322234859,
        3619051116899546522749758366789148338073218509890230910706568349062155774658,
        3828986280231264412119396767964885750743604695407803434727059029749036225402,
        3235392121103274501947848297534723083645186645590455903627068221244822580638,
        6954557542939203263636319089860780311655008727457068253723762152917625940866,
        800987895336521473501054082947147113938835305926701251170792636703509222548,
        3773440635842449458993967783872140153008006734123467301664214375603947314289,
        1949697171347093382423061308443839609346170231700213718240803974118777648830,
        4202317170578841276916276743173065138681976429174191843669885374044630400527,
        2375986090841357832505882430859334137122992074407494181438509240049667619783,
        5607056621918473115839414788642924193770303112682189360543592648639403922349,
        3869708737376808788220258453294151357659157828581520401940844781802482595700,
        5966359341296324846660240690557176339721412855423460156814243440845145098950,
        3780853545538888980898578936068792150362851990656457727019767008696956452790,
        6835165829378914335761017932583377850896196984574001190584034577367988857061,
        462771129707998829505264401755520860226628861218132075783023757286903366844,
        457681635304313424653914647891650547367788140353409773505315843332873896522,
        3951031864744351925405019577245509568099736300704634851858754900422801173032,
        6397560441938677630663769195123523462925650105821864122019087863772294290788,
        6380131394524887657747607541069900348398466653581475974832085566659767346231,
        3817662986250687507244685883913431709474763035493532220455749748076521305035,
        4095706296310389864264510941693644329866857402930180488413780951908422603497,
        3416518603330321448915023407032202973835518635572907954722223575521808450457,
        4721070625029696976487272009018828068445569648816255574402758008527297919272,
        2873269343520786652281863415445147353063130296244447185150640446246545353611,
        946008450417902283444482145537369374267720783540402246422557916512647471429,
        3142748358557138924197447924452993007860215279557022114617187696073812255772,
        6469390172845565464318512303418346133773595952863351829731336291337839319987,
        5609701777018894440003861641067227982355560581828875839476658121476067880855,
        5371291717047090770192705602878862398661383887368727268778145502061126831320,
        911781286742420852477602639688001400864332010176792118399587159148901318715,
        3699492506239970244301397173096104007431295769581356174822075626882295205829,
        3809137411093086332968405879909224769027116437381070060418150380753040505374,
        5243275689880164646038509392372391446958492170761821829712820452270928460244,
        6366040404446777888983192109072966326603880924957077313573587488431558819725,
        6064201575758490068748995541862668058911368026174880854702335756021562798875,
        2306199866311675630624924829720712630400038239416251368632640446352271220431,
        4281100133014135529182448891676471129419903272490660554999882021396693228181,
        5478414970267315288389880540182632105552528512575217533916996698727261908656,
        6567073479615230609636367220999338219015478500107689027877358855574478756899,
        1236673844098960100503517041781712932701514763706433608171570669560213979879,
        7126766834177987418566846356960254178931929233045520552031384936169901535769,
        4176834016394428478014507881418016069805479722310918839131602008279691462002,
        462393602523122607774721583485567092495596118233205617774399110935074260866,
        3588038973689819641686944124618508058735084061452231295349885505516852591636,
        1235774160853714616720900211116268669382948842424270857838337440458781022999,
        1352833966402363313410040276191759054054470752322166261669085497609559662553,
        4298916936326816227640140360087360171624126594135290335103384872379742685149,
        1546234689544096409547299094832592856842843493449212314407849018936142956367,
        2870363027440782916187155893483611536275023795668625105757756112386033775792,
        1272350249951428226810476173063155191078960674068531505006233719917313306631,
        6408239605022370082085588913905848791689895020921273552824716176177621422097,
        5023119386170913813433419715499899328934577082875110789469032524525805546018,
        5257599965834472596693812911507703863599775079908613811030976336115925930706,
        5729690404438794049202683282835416650760083851566706486578291819255130131642,
        6808021922029800592565474961569700533684188469780957683707310232992905248992,
        3694361931901463962585213214971553803707400817503280337531459026937188664556,
        6553841600222362665321122090951942411553147242741380810296025253573872382125,
        6983370556851749272123885966258404022099435057772144000647709815597364018769,
        348234821257659276744824447425749642548980591675479869488606125280918893537,
        1697217521946754957762409787862550178908181765608260658433626001837373135884,
        5653898949688274197131159819486432117983043450940448579960704672264967129377,
        2832705959121886382809149801436617431548212663542695554276648670291536513528,
        1550583882863442234231128204727678131528175894599746746948815612461504508789,
        7068210003449785867030502201093786025730809838762153632305192975083010968330,
        312121563437608143316190497497729317662928270572004861469603696537315060821,
        4171132902124241852594230561953586355135191815020436283280306884964973571656,
        6396820312522830439298256061049769104492126210452187073473426159958633276815,
        1001828675628621777217090780808112795220298794455192111671038698411180242769,
        237783266983761055570890314197140424443106722639662427553708182964844217684,
        5465222060202241562139459197712733845509509813826165881099726189253130323435,
        949040729509319063590909362531163853614897411570203889127170793241420093023,
        1342294063607098853157298301429872889536060649504996320913524375977822532567,
        3445764004703232429302842921725721833608478335998610309163442352942610187410,
        4372919797904589887856733532062215513011095487503926898473005535400609619020,
        4555465485412546087387826389447664022761934477176671433198081335409305152963,
        6616230431853593221006027278571607288635237807360808098806863376312633995798,
        5675910069855536194551595770348455668383831031012323496933014555229000841008,
        6402361348400869995635269256623123693028766076332558225594742645878645970803,
        2444220595040100279590241328213079136595353373164632764337688069899851907147,
        773976735395665743409075805860900896055967670479861117058948506264841119273,
        5526303669590894729095239292688081145515846875934603668101836016027304200583,
        3017509208908779716382322710141258674911884070455449811126357188628630223559,
        5953320032743818765691194487232638430637946013222808395284665190144749569381,
        1103622713179053057766214574882794058713705886415762415092252981086807488926,
        5748070789470511124108529383245724655395751906870766109855529597989239656267,
        4075392062655102708674977037452951014958333637798834024893325027772988984431,
        1744202655151279372914362294252451439329326010861498818242700006842511158408,
        4698291057272660100115925401030507739129450234202499392466015602218555269068,
        2450721887957216393880130712159645548169559054508112330588527971491050140499,
        841532664172712109517357999005637163323604921991323251612682155373988558951,
        6423684214412731150419964433503364740833976841576639388170696855781968166529,
        4470949755941245394742798853906223879119885146996706472852601565277230894946,
        2057253203048743366052381729213424236750698156167251573237913262551036680335,
        2804715501112822889727257818681032391036819793683772562978944490548256640764,
        980432194176804824659880793757867203763571512824733166860943578104328639183,
        920829661117364965575338335291865479487383492386672259527088073562300688875,
        342723801041465172313213664550219033918005617879744950751304822749310873283,
        3878525053052475714475471453802791164141114960254038525374932808799038444279,
        2703607564131755904553212658791528152864808595564031961266336362356530963489,
        761285949745584868017772957153771653683331216709316957786138286945078098524,
        157112916260517716956287547274144559021099238448200461319382977756022780334,
        2964531007101461115713234373444771666553138067263117833849497372633017860241,
        3918029921390187653854553234657846384129820019374773619911809256666353834190,
        5665554639856909394119505819175358872358240223805370911702979011329998279816,
        5697265137273409754840438234684619902049374590296534019071505826761209713971,
        6123592646955490004605460212471722100736894836740157409322643101903443694898,
        7107901381657815796244556523695646868297758725877777807785327190577197059607,
        775227747212100649025885309309561919942094982362765918081451467483523562245,
        4337602521024296827121897745140387994371929317072746005987869537698035737879,
        3931112294117232890790734321989368722890244046640194426150597772315086391757,
        2269794382195154777678159586636292206124890134126451609132801482511732764696,
        5310972276442558154747190324958334586081632829667530007636853290641313067683,
        4253828790705406181771446084297187195062912982188880934211465546237583671066,
        238264517444270917475347101757277064435559197191539832365151729218832148266,
        6066901354902605222717439915995840258353217957359909811452982199610421092390,
        5522997152808027537005507785431374081664452002221374767651438722256257363347,
        288218740366954234509230224430304375747672709482282861524445949629668560157,
        6446618643962812208301763979772818133467651161199139187670109731244237880796,
        3626742156569725686442093453676800663017629106937028767308460151605262322309,
        2153188762830822197259586790750309797433687523430022285452899109587060093981,
        696053960154702596032537526254906865110160683431033940705257466984553678612,
        2554954891405378095797232627127296847888191891165248303673544504889505595177,
        2470445947054967371455690498326231442590252776414062037250122976105917424242,
        139795062243665637328386046721114758364262313215494377253605029560562364724,
        5634747118448466292473409363166095566212126821300278977099717606514777344359,
        4501483834558169671365345971072560392465726402505239662839523583523916717606,
        3573783603535294501899623972106736055551496537947455901927000811738772049408,
        3727623164358829726289433000620917375756927631128502350751015657344115974249,
        7161108390048431653177003317776584987918303728954108675361289463867797273394,
        997303642249346541975475008977539301319430078708120045923072872247529609352,
        5873473691606397721611901247222567989308954781289351446582307508545942957995,
        931664219599964066102190699345503699431543463899055867148659941393350649615,
        2971570032334280087759354904152320581677952858909425625334271861537503944830,
        2840095548863431982189522336103890866251980297941555013708178769973001093871,
        3839675754248009639375612314773174031823311818301604013266661735324675925663,
        1509283507390353430421207681141328248548678148475497775828426810842425724222,
        6462459328339170135467918026483856723490687869431690716545159969380445896969,
        1441993951698338027693263045297267854302880283025117343936314708654822488279,
        2476832477739330953753995644406079690010091147872962616955378693730071303711,
        6754525364694045843436551330357911993176534430771662189240468288496881912524,
        6598568902442433963266864161444127602025819375262073692907494337169462216266,
        5275256934047159889269108544657840231663986448849942691195564803149662697273,
        6294302156993014063840309346197769952411746765453731847079403637452884052604,
        923486068914713587597497369497727128196418167549813175179593864728743790816,
        1848599976197146535788065442392028408064606141300631692339995323599216284669,
        975327215355849367760692166427521022950272457880168569690429565435489661816,
        2340106731765516215126187692861887750662463952685828868743604516457892407523,
        3103361306176392378475739865172441694772626317622378300143786055550342779007,
        4409819244305591544156560098317365127517498025744185058533828402664290181056,
        8314023298175755519249619897964637160488940612747009809893894757276342293,
        5677769187774746451530562626832165114044702451474208714574383040269361808769,
        1064787049835601997782131336903680354301740708801137981943491648790236000928,
        387965253000870596683660076886217400882451781011152840805566880543476630088,
        5817970737337198997712366851351540605921509658217661433153815866506879066091,
        4024001807786639484861174704873156333854099883854026593518620902911769994552,
        4973389416949353145258814844269613683986156219842787911747376639835833792763,
        2241993137498324528433773239921394412522480061489970080734897065203805431368,
        1079575090385255388555949050362163747211898035006067183077782219438356631556,
        2808041691816868043331816829843537669416241930656291877847291806015425070561,
        2257919077866360168306974352443881021400066695264723540694210382535497599173,
        329765006509398674038745820722355870608355310717140999422479717955920058235,
        4998396970048128271425008372539918029237914643318571052205340780184077671146,
        1118819434028294964169673204585059641992281962007459704425335554774181947967,
        1594331767755467065325220641245537736610120110437273168655786113338581298898,
        4848517996538902355412897567620384771756165625354690458104018546763147148514,
        4453647097682523455091336873519583473187574022778627825726019735027549501922,
        4405730704401901181487848760095668328476107656160358764131521474662401094250,
        4332264557087677141469494324256358040880749032669509836766818056305855239705,
        1128318090219213924076616644088895015595714149054271828764959705502852689914,
        2987453898252946344089248050459815642233082610725926121063512296250807230464,
        538670926048034258872602602322338018774509702992238210133571787193815586867,
        5724328753269854379002583891472820499949462871862890389394407673769566825130,
        6602174384303100642387319057330572352752430860960470092401348648639468845269,
        2819420449961214802670345585136481312627017618283472325829627763286177099795,
        2757213742838059800712858185966237446650455399332473803602855968111004391251,
        5108348433296251323261338058217717965833413528337763231058283777530978644897,
        4708572874940147452134236741861644806787043591857200604458050457395249977045,
        7139518857611713637578240613126546038244377607800342944170657754223392944383,
        3794943286467811177167866781909963968219918978176671829712009963967052788367,
        345756506964195483602664778340400564774853646113351084885306732194074552327,
        4090224606961538940425365476834874525698111397762927866080900770413746856710,
        6693098630493466314747636924550919425948125934182280503299476244631300099920,
        6294896302335994331152798021834238325024684363455581546878225641129461432976,
        2392711155086936643488798382452316822933346274420601028957966320264594029487,
        3537626933094364096332981845820793826949787946619626883658536252900407106713,
        4499326752946458636512566903230196750768566003549277029491493352485927200663,
        1739983015641575896909632836198843080312402982395008685486238701989744732294,
        3442058622763880870893222120161863543281324271100271132113992075163322494108,
        4275288827387128156435783092593522415840359710962522532451401906982214916720,
        1949978332730307949286482960042626084171668982405992502218535552923089842036,
        1677235447840686686833081421077806803746849234870780144795576084627645175657,
        5418260620556736167928295180330814266146461083309986484653678065818245992801,
        6099967125492768725763436967764131071375429508188573451203848657475967308713,
        3815174188675269490267081376360243431061290190274253645116438784050678814751,
        2230048130409508210722395777255069364661315907359254669325960247355668998297,
        2114814081095835337687452653423303202558919695520477155068071409722041844286,
        139931613391830873071388037204211347002933508838276220001935409893647448297,
        4049143337625570593348025376689261814776737962659410615377945746179099469314,
        1231665453652624978092760683744748691919739427243559310241919011804555401308,
        2689743918650411527032624866108757757657229115091793673374802214754121791349,
        918371121841923091649307098267599395015136362036108324733947932413647007410,
        7051651343436029672665723458340798585753978982683812562499934938019597367162,
        1635986695290599039535176719550209573441750077600351371299177007498455660462,
        7009735350841216929653532161269511789854180149609602471472709890793158054376,
        2906147827705600609556565553246257649641338240013382410740795484710834221031,
        2908978200458558489506789642875024191736521584046235788916686294206405563981,
        4973244918260371724451169891085655743840455148527249924163410501937777932822,
        6667330861215540497770461556357740328386570417037975110446101109481151933660,
        4919580122536688919963670311660443753264941031643064895309775485578016910992,
        3013705996668186065066738482149462151042670280499389698509541824449224639354
    ]

    field[49] POSEIDON_M = [
        395280599848291522278488155300920643501648728930329353007850176051098017665,
        1714596801367948338610365069873811152417654183561300594950256261283615673222,
        2789244458545076846431705466230133857727212573328726308048247586220921579404,
        5726057353301912357289946455310663175439363587396619382715919735008794364128,
        686525910699979708036085693625439740357158160144357631015577701886037979867,
        1381101475508019788458500002633366669421841789155468610885606858448301370993,
        3263096633593831422800672136689628710055542187815144877509604669429555368901,
        4309819820125539191823212467386902556323435872417560128313547606681036655746,
        5424530322643599197901314149352611264934664188089302727693476693608887180593,
        225852713223227197034932992196519096597513357952469455056166692852032191466,
        4267705799449442749933563999924943579906934093295359109991783073875504173429,
        3336943565179400801121101883331781823734620338226768892775747480495980576480,
        2677230630464994580725525792126682006231621039672977685162317213548905138950,
        2140110802844755344796275981983206837363944736208171381649395629850623007593,
        1268073732930412136744531647726961687072455876904022422964141800224813971846,
        2057891842295047989883066521964239202165488120040191932429148700323431639668,
        7055270361467466937455438930819413940930380504876913808755617825004890925793,
        3080476088213941641776803028694957654252602540365220439977470182932744881232,
        5351771434399932436997365301259119700648145549152802606071760060263709610649,
        6449865773249033094361612323503732726588341897732971716126285157815105197161,
        3405603660301213493377778859476655708711982405231590282157121639948633665156,
        4607346897018705818536587409625419282697540317884256307712199373150137790704,
        331130676555734345178782345541275551478011835610081897068242735197253187076,
        2778481019693324775103129807161189146772026244653675676662085503923833287946,
        4512720621308932532065488286997155228191855189265854473654261023906778526751,
        4317198831632357289530875213937924886421106578374783699591347067160092732003,
        4821105265046203022602276933618254554958682789208809693451110910627921150195,
        6795347324809763644488883258871420727249458569202662193560842955371299933159,
        2687181720025685519762369257871911847265088883023928902734574807644701231955,
        3435058331654439254501386161834904036833109380507329876695569326088975529655,
        900906902998193152900176956666418159412927652395602393530500757980308014531,
        1562971274941931291461856993144386131541575492880430985195284071881153842444,
        6053503722881983528028794170224275805229190567965158789373129459765538070820,
        3381921927453805754472641175426703848340558483983924623959875989040107713372,
        4107273978994799506661841181600054677183739081639294364695418327907423462927,
        6339349259459292435514874161652224295418441094243274704670559875913932444663,
        6430812717038012641800096064973830445805317574173180153907649650978807467243,
        2613459066479048275979292670051597063945215187527488965053681491198090270922,
        4500142408299257285040250409256756713702806558263311495283802294310410326875,
        174219660041205207990412654736705913437117774779221604174255503453904697016,
        2587496267572713028872739419833715362959782327631782320723362265337790092544,
        6382331181954228316716998833298962398977346155447618232768090282094470917487,
        3468077547534242022504241422111825284525225164953592611976714650951301345915,
        2657559361110140422297624599944213687161277028550676004444313993684337926319,
        2951243865820583005813255634694382555880661150765699412385887320909688524828,
        3229911261754164572050609430132354741933958547139611365874584073589602769488,
        3515557656549791042549493074502749184955965768709220584426013491072434159326,
        4006864193252413970240853500607398729141402909175137367194364872855144896519,
        35748535106802638724374032009435387539404675569558427537800528175638581563
    ]

    u32 t = n + 1

    u32 f = 8
    u32 p = 57

    // Constants are padded with zeroes to the maximum value calculated by
    // t * (f + p) = 455, where `t` (number of inputs + 1) is a max of 7.
    // This is done to keep the function generic, as resulting array size depends on `t`
    // and we do not want callers passing down constants.
    // This should be revisited once compiler limitations are gone.

    field[455] c = POSEIDON_C
    field[49] m = POSEIDON_M

    field[{max_n} + 1] state = [0; {max_n} + 1]
    // BASELINE
    for u32 i in 1..{max_n} + 1 do
        if i < t then
            state[i] = inputs[i - 1]
        endif
    endfor

    for u32 r in 0..65 do
        if r < f+p then
            state = ark(n, state, c, r * t)
            state = sbox(n, state, f, p, r)
            state = mix(n, state, m)
        endif
    endfor
    // COBBL
    u32 i = 1
    while i < t do
        state[i] = inputs[i - 1]
        i = i + 1
    endwhile

    u32 r = 0
    while r < f+p do
        state = ark(n, state, c, r * t)
        state = sbox(n, state, f, p, r)
        state = mix(n, state, m)
        r = r + 1
    endwhile
    // END_SPLIT

    return state[0]

def main(u32 n) -> field:

    field[{max_n}] padded_message = [0; {max_n}]
    field sum = 0
    for field i in 0..{max_n} do
        sum = sum + i
        padded_message[i] = sum
    endfor

    field hash = poseidon(n, padded_message)

    return hash